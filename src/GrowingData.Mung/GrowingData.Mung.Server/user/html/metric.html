<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>MUNG Firehose</title>

	<script src="/static/js/lib/jquery-1.6.4.js"></script>
	<script src="/static/js/lib/jquery.signalR-2.0.3.js"></script>
	<script src="/static/js/mung/MUNG.MetricConnection.js"></script>



</head>
<body>
	<style>
		body {
			font-family: Consolas, monospace;
			font-size: 12px;
		}

		li {
			list-style-type: none;
			margin-bottom: 8px;
		}
	</style>

	<div class="container body-content">

		<h1>Metric</h1>

		<div class="metric-value"></div>


		<script type="text/javascript">
			$(function () {
				var ul = $(".events");
				var metricConnection = new MUNG.MetricConnection({});

				metricConnection.listen({
					name: "test-sum",
					keyFilter: "country=au&state=*",
					updated: function (evt) {

						for (var i = 0; i < evt.metrics.length; i++) {
							var items = $("<div>")
								.text(JSON.stringify(evt.metrics[i]))
								.appendTo($(".metric-value"));
						}

					}
				});
			});
		</script>
		<hr />
		<footer>
			<p>&copy; MUNG 2014</p>
		</footer>
	</div>

</body>
</html>
